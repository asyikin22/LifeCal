<!DOCTYPE html>
<html>
<head>
  <title>Life Calendar Grid</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: Arial, sans-serif;
      padding: 20px;
      box-sizing: border-box;
    }
    .top-bar {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      width: 100%;
    }
    .box {
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      width: 200px;
      text-align: center;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      box-sizing: border-box;
    }
    .box h3 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 30px;
    }
    .box input, .box button, .box select {
      width: 100%;
      padding: 6px;
      margin: 4px 0;
      text-align: center;
      font-size: 12px;
      box-sizing: border-box;
    }
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 8px;
      justify-content: center;
      width: 100%;
      max-width: 1000px;
      box-sizing: border-box;
    }
    .grid-item {
      min-width: 90px;
      min-height: 100px;
      border: 1px solid #999;
      text-align: center;
      font-size: 12px;
      padding: 4px;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #fff;
      box-sizing: border-box;
      overflow: hidden;
    }
    .age {
      font-weight: bold;
      margin-bottom: 2px;
    }
    .year {
      font-size: 10px;
      color: #555;
      margin-bottom: 4px;
    }
    .grid-item select {
      width: 100%;
      font-size: 10px;
      margin-top: 4px;
      box-sizing: border-box;
    }
    .event-block {
      margin-top: 4px;
      width: 100%;
      text-align: center;
      padding: 2px;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 10px;
    }
    .event-block input {
      width: 90%;
      font-size: 10px;
      margin-top: 2px;
      box-sizing: border-box;
    }
    .add-event-btn {
      font-size: 10px;
      margin-top: 4px;
      padding: 2px 4px;
      cursor: pointer;
    }
    .education { background-color: #f9c5d1; }
    .work { background-color: #d1e0ff; }
    .travel { background-color: #b2f2bb; }
    .wedding { background-color: #fbc2eb; }
    .loss { background-color: #d3d3d3; }
    .other { background-color: #fce38a; }
  </style>
</head>
<body>

<div class="top-bar">
  
  <div class="box">
    <h3>My Life Calendar</h3>
    <div id="ageDisplay" style="margin-top: 10px; font-size: 12px;"></div>
  </div>

  <div class="box">
    <label>Birth Year:</label>
    <input type="number" id="birthYearInput" placeholder="e.g. 1990">
    <button onclick="generateGrid()">Generate Calendar</button>
  </div>

  <div class="box">
    <label>Country/Timezone:</label>
    <select id="timezoneSelect">
      <option value="Asia/Kuala_Lumpur">Malaysia</option>
      <option value="America/New_York">United States (New York)</option>
      <option value="Europe/London">United Kingdom</option>
      <option value="Australia/Sydney">Australia (Sydney)</option>
      <option value="America/Toronto">Canada (Toronto)</option>
      <option value="Europe/Berlin">Germany</option>
      <option value="Asia/Tokyo">Japan</option>
      <option value="Asia/Dubai">United Arab Emirates (Dubai)</option>
      <option value="Europe/Paris">France</option>
      <option value="America/Los_Angeles">United States (Los Angeles)</option>
    </select>
    <div id="dateTime" style="margin-top: 8px; font-size: 12px;"></div>
  </div>

</div>

<div class="grid-container" id="lifeGrid"></div>

<script>
let selectedTimezone = 'Asia/Kuala_Lumpur';

document.getElementById('timezoneSelect').addEventListener('change', function() {
  selectedTimezone = this.value;
});

// Real-time clock with day included
function updateDateTime() {
  const now = new Date();
  const formatter = new Intl.DateTimeFormat('en-US', {
    timeZone: selectedTimezone,
    weekday: 'long',
    year: 'numeric', month: 'long', day: 'numeric',
    hour: '2-digit', minute: '2-digit', second: '2-digit'
  });
  document.getElementById('dateTime').innerText = formatter.format(now);
}
setInterval(updateDateTime, 1000);
updateDateTime();

// Generate grid & calculate age
function generateGrid() {
  const grid = document.getElementById('lifeGrid');
  grid.innerHTML = "";
  
  const birthYear = parseInt(document.getElementById('birthYearInput').value);
  const now = new Date();
  const currentYear = now.getUTCFullYear();
  
  if (isNaN(birthYear)) {
    alert("Please enter a valid birth year.");
    document.getElementById('ageDisplay').innerText = "";
    return;
  }
  
  const age = currentYear - birthYear;
  document.getElementById('ageDisplay').innerText = "You are " + age + " years young! ðŸ˜Š";
  
  for (let ageIndex = 0; ageIndex < 90; ageIndex++) {
    const div = document.createElement('div');
    div.className = 'grid-item';
    
    const ageDiv = document.createElement('div');
    ageDiv.className = 'age';
    ageDiv.innerText = "Age: " + ageIndex;
    
    const yearDiv = document.createElement('div');
    yearDiv.className = 'year';
    yearDiv.innerText = birthYear + ageIndex;
    
    const eventsContainer = document.createElement('div');
    
    const select = document.createElement('select');
    select.innerHTML = `
      <option value="">-- Select Event --</option>
      <option value="education">Education</option>
      <option value="work">Work</option>
      <option value="travel">Travel</option>
      <option value="wedding">Wedding</option>
      <option value="loss">Loss</option>
      <option value="other">Other</option>
    `;
    
    select.onchange = function() {
      if (select.value) {
        addEvent(select.value, eventsContainer);
        select.remove();
      }
    };
    
    div.appendChild(ageDiv);
    div.appendChild(yearDiv);
    div.appendChild(eventsContainer);
    div.appendChild(select);
    
    grid.appendChild(div);
  }
}

// Add event to a year block
function addEvent(eventType, container) {
  const eventBlock = document.createElement('div');
  eventBlock.className = 'event-block ' + eventType;
  
  const label = document.createElement('div');
  label.innerText = eventType.charAt(0).toUpperCase() + eventType.slice(1);
  
  const detailInput = document.createElement('input');
  detailInput.type = 'text';
  detailInput.placeholder = 'Details';
  
  eventBlock.appendChild(label);
  eventBlock.appendChild(detailInput);
  container.appendChild(eventBlock);
  
  const addAnother = document.createElement('button');
  addAnother.innerText = '+ Event';
  addAnother.className = 'add-event-btn';
  addAnother.onclick = function() {
    const select = document.createElement('select');
    select.innerHTML = `
      <option value="">-- Select Event --</option>
      <option value="education">Education</option>
      <option value="work">Work</option>
      <option value="travel">Travel</option>
      <option value="wedding">Wedding</option>
      <option value="loss">Loss</option>
      <option value="other">Other</option>
    `;
    select.style.width = "100%";
    select.onchange = function() {
      if (select.value) {
        addEvent(select.value, container);
        select.remove();
      }
    };
    container.appendChild(select);
    addAnother.remove();
  };
  
  container.appendChild(addAnother);
}
</script>

</body>
</html>
